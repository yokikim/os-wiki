---

layout: page
title: Fork( ) 및 Exec( ) 시스템 콜
parent: 스레드와-관련된-문제들

---

206p

우리는 3장에서 fork()가 별도의 복제된 프로세스를 생성하는 데 어떻게 쓰이는지 살펴보았다.

다중 스레드 프로그램에서는 fork()와 exec()의 의미가 달라질 수 있다.

...

만일 한 프로그램의 스레드가 fork()를 호출하면 새로운 프로세스는 모든 스레드를 복제해야 하는가 아니면 한 개의 스레드만 가지는 프로세스여야 하는가?

몇몇 UNIX 기종은 이 두 가지 버전 fork()를 제공한다.

하나는 몸든 스레드를 복사라는 것과 다른 하나는 fork( )를 호출한 스레드만 복제하는 것이다.

...

exec( ) [시스템 콜](시스템-콜.html)은 보통 3장에서 기술한 것과 같은 방법으로 수행된다.

즉 어떤 스레드가 exec() 시스템 콜을 부르면 exec()의 매개변수로 지정된 프로그램이 모든 스레드를 포함한 전체 프로세스를 대체시킨다.

...

두 버전의 fork() 중 어느 쪽을 택할 것인지는 응용 프로그램에 달려있다.

fork()를 부르자마자 다시 exec를 부른다면 모든 스레드를 다 복제해서 만들어주는 것은 불필요하다.

왜냐하면 exec에서 지정한 프로그램이 곧 모든 것을 다시 대체할 것이기 때문이다.

이 경우에는 fork() 시스템 콜을 호출한 스레드만 복사해주는 것이 적절하다.

그러나 새 프로세스가 fork() 후 exec을 하지 않는다면 새 프로세스는 모든 스레드들을 복제해야 한다.