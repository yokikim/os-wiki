---

title: 스레드 로컬 저장장치
layout: page
parent: 스레드와-관련된-문제들

---


210p

한 프로세스에 속한 스레드들은 그 프로세스의 데이터를 모두 공유한다.

이와 같은 데이터 공유는 다중 스레드 프로그래밍의 큰 장점 중 하나이다.

그러나 상황에 따라서는 각 스레드가 자기만 액세스할 수 있는 데이터를 가져야 할 필요도 있다.

그러한 데이터를 스레드-로컬 저장장치(thread-local storage, TLS)라고 부른다.

예를 들어 트랙잭션 처리 시스템에서 각 트랜잭션을 독립된 스레드가 처리해 준다고 가정해 보자.

더욱이 각 [트랜잭션](트랜잭션.md)은 고유한 [트랜잭션 식별자](트랜잭션-식별자.md)가 주어진다고 가정하자.

이때 스레드마다 고유한 식별자를 연관시키기 위해서는 스레드 국지 저장소가 있어야 한다.

...

TLS를 지역 변수와 혼동하기 쉽다.

그러나 지역 변수가 하나의 함수가 호출되는 동안에만 보이지만 TLS는 전체 함수 호출에 걸쳐 보인다.

또한 개발자가 스레드 생성 과정에 대해 제어할 수 없는 경우(예, 스레드 풀과 같은 암묵적 기법을 사용하는 경우) 다른 방법이 필요하다.

...

어떤 면에서 TLS는 정적 데이터와 유사하다.

차이점은 TLS 데이터는 스레드마다 고유하다는 것이다.

(사실 TLS는 보통 static으로 선언된다.)

대부분의 스레드 라이브러리 및 컴파일러는 TLS를 지원한다.