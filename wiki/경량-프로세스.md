---

layout: page
title: 경량 프로세스
parent: 스케줄러-액티베이션

---



211p

[다대다](다대다-모델.md) 또는 [두 수준 모델](두-수준-모델.md)을 구현하는 많은 시스템은 사용자와 커널 스레드 사이에 중간 자료구조를 둔다.

이 자료구조는 통산 경량 프로세스 또는 LWP라고 불리며 다음 그림에 설명되어 있다.

![image](https://user-images.githubusercontent.com/116250393/213779648-6cbfdc54-8486-4835-b4f9-fd776ac66f6f.png)

사용자 [스레드 라이브러리](스레드-라이브러리.md)에 LWP 방식은 응용이 [사용자 스레드](사용자-스레드.md)를 수행하기 위하여 스케줄 할 가상 처리기(virtual processor)처럼 보인다.

각 LWP는 하나의 커널 스레드에 부속되어 있으며 물리 처리기에서 스케줄 하는 대상은 바로 이 커널 스레드이다.

입출력이 완료되기를 기다리는 동안 같이 커널 스레드가 봉쇄되면 LWP도 같이 봉쇄된다.

이 연관을 따라 LWP에 부속된 사용자 수준 스레드도 역시 봉쇄된다.

...

응용은 효율적으로 실행되기 위하여 임의의 개수의 LWP를 필요로 할 수도 있다.

> 하나의 처리기상에서 실행되는 CPU 중심 응용을 고려해 보자.
>
> 이 시나리오에서 한순간에 오직 하나의 스레드만이 실행될 수 있다.
> 
> 따라서 하나의 LWP이면 충분하다,

그러나 입출력 중심 응용은 여러 개의 LWP를 필요로 할 수도 있다.

통상 동시에 발생하는 [봉쇄형](봉쇄형.md) [시스템 콜](시스템-콜.md)마다 하나의 LWP가 필요하다.

예를 들어 서로 다른 5개의 파일 읽기 요청이 발생했다고 가정하자.

모든 LWP가 입출력 완료를 기다리면서 커널 안에서 대기할 수 있기 때문에 5개의 LWP가 필요하다.

만일 [프로세스](프로세스.md)가 4개의 LWP만을 가지고 있다면 다섯 번째 요청은 하나의 LWP라도 커널에서 복귀할 때까지 기다려야 한다.