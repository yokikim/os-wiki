---

layout: page
title: 가상 파일 시스템
parent: 파일-시스템

---


662p, 파일 시스템 내부구조-가상 [파일 시스템](파일-시스템.md)

파일 시스템 구현은 세 가지 주요한 계층으로 구성된다.

첫 번째 계층은 열기(open( )), 읽기(read( )), 쓰기(write( )) 그리고 닫기(close()) 호출과 파일 디스크립터에 기반을 둔 파일 시스템 인터페이스이다.

두번째 계층은 가상 파일 시스템(virtual file system, VFS) 계층이라고 한다.
VFS 층은 두 가지 중요한 기능을 제공한다.

1. NFS는 VFS 인터페이스를 명확하기 정의함으로써 파일 시스템의 일반적 연산을 구현과 분리한다. VFS 인터페이스에 대한 다른 구현들이 같은 기계상에 공존할 수 있으므로, 다른 형태의 파일 시스템을 지역적으로 마운트함으로써 투명한 접근을 가능케 할 수 있다.
2. VFS는 네트워크에 속한 모든 파일을 동일한 형태의 파일 객체로 표현해주는 기능을 제공한다. 자세히 설명하면, VFS는 vnode라 불리는 파일 표현 구조에 기반을 둔다. vnode는 네트워크 전체에서 유일한 파일에 대한 수치 지정자(designator)를 포함하고 있다. (UNIX의 inode는 한 파일 시스템 내에서만 유일하다.) 네트워크 파일 시스템을 지원하려면 범-시스템상에서 유일해야 한다. 커널은 각 활성 노드(파일이나 디렉터리)에 대해 하나의 vnode 구조를 가진다.

그러므로 VFS는 원격 파일과 로컬 파일을 구분하고, 로컬 파일들은 파일 시스템 유형에 따라 더 세부적으로 구분된다.

VFS는 특정 파일 시스템의 명령을 활성화함으로써 파일 시스템 유형에 따른 로컬 요청을 처리하며, 원격 요청에 대해서는 NFS 프로토콜 [프로시저](프로시저.md) (또는 다른 네트워크 파일 시스템의 경우에는 다른 프로토콜 프로시저)를 호출한다.
파일 핸들은 관련된 vnode들로부터 구성되며, 이들 [프로시저](프로시저.md)에 [매개변수](매개변수.md)로 전달된다. 파일 시스템 유형이나 원격 파일 시스템 프로토콜을 구현하는 계층은 구 구조의 최하부(3단계) 계층이다.