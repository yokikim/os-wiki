---

layout: page
title: 인터럽트 핸들러
parent: 인터럽트

---

8p

인터럽트는 컴퓨터 구조의 중요한 부분이다.

각 컴퓨터 설계는 자신의 인터럽트 메커니즘을 가지고 있으며, 몇 가지 기능은 공통적이다.

인터럽트는 적절한 서비스 [루틴](루틴.md)으로 제어를 전달한다.

이러한 전달을 관리하는 직선적인 방법은 인터럽트 정보를 조사하는 일반적인 일반적인 루틴을 호출하는 방법이다.

이 루틴은 이어 인터럽트 고유의 핸들러(handler)를 호출한다.

[인터럽트 벡터](인터럽트-벡터.md)

인터럽트 구조는 인터럽트된 모든 정보를 저장해야 인터럽트를 처리한 후 이 정보를 복원할 수 있다.

만약 인터럽트 루틴이 처리기의 상태를 변경할 필요(예를 들어, 레지스터의 값을 변경하여)가 있다면, 인터럽트 루틴은 반드시 명시적으로 현재의 상태를 저장하여야 하며, 복귀하기 전에 상태를 복원해야 한다.

인터럽트를 서비스한 후, 저장되어 있던 복귀 주소를 프로그램 카운터에 적재하고, 인터럽트에 의해 중단되었던 연산이 인터럽트가 발생되지 않았던 것처럼 다시 시작된다.

### 구현 Implementation

기본 인터럽트 매커니즘은 다음과 같이 작동한다.

CPU 하드웨어는 [**인터럽트 요청 라인**](인터럽트 요청 라인.md)(interrupt request line)이라는 선이 있는, 이는 하나의 명령어의 실행을 완료할 때마다 CPU가 이 선을 감지한다.

CPU가 컨트롤러가 인터럽트 요청 라인에 신호를 보낸것을 감지하면, 인터럽트 번호를 읽고 이 번호를 인터럽트 벡터의 인덱스로 사용하여 **인터럽트 핸들러 루틴**(interrupt-handler routine)으로 점프한다.

그런 다음 해당 인덱스와 관련된 주소에서 실행을 시작한다. 인터럽트 처리기는 작업 중에 변경될 상태를 저장하고, 인터럽트 원인을 확인하고, 필요한 처리를 수행하고, 상태 복원을 수행하고, `return_from_interrupt` 명령어를 실행하여 CPU를 인터럽트 전 실행 상태로 되돌린다.

장치 컨트롤러가 인터럽트 요청 라인에 신호를 선언하여 인터럽트를 ***발생***(raise)시키고 CPU는 인터럽트를 ***포착***(catch)하여 인터럽트 핸들러로 ***디스패치***(dispatch)하고 핸들러는 장치를 서비스하여 인터럽트를 ***지운다***(clear).

![image](https://github.com/yokikim/osdinostudy_1/blob/main/os_pic/1.4.png?raw=true)

[최신 운영체제에서의 인터럽트](최신-운영체제에서의-인터럽트.md)

---

540p

기본 인터럽트 기법은 다음과 같다.

CPU 하드웨어는 **인터럽트 요청 라인**(interrupt request line) 이라고 불리는 선을 하나 갖는데, CPU는 매 명령어를 끝내고 다음 명령어를 수행하기 전에 늘 이 선을 검사한다.

입출력 하드웨어 컨트롤러가 이 요청 라인에 신호를 보내면 CPU가 알아차리고 각종 레지스터 값과 상태 정보를 저장한 다음, 메모리상의 **인터럽트 핸들러 루틴**으로 이돔(jump)한다.

인터럽트 핸들러는 인터럽트의 발생 원인을 조사하고 필요한 작업을 수행한 후 CPU를 인터럽트 전의 실행 상태로 되돌리기 위해 인터럽트 이전으로 복귀 명령(`returen from interrupt`)을 실행한다.

장치 컨트롤러는 인터럽트 요청 라인에 신호를 보냄으로써 인터럽트를 ***야기***하고, CPU는 인터럽트 상황을 ***알라차리고*** 인터럽트 핸들러를 ***수행***한다.

그러면 핸들러는 입출력 장치를 서비스함으로써 이 인터럽트를 처리해 준다.

![image](https://github.com/yokikim/osdinostudy_1/blob/main/os_pic/12.1.png?raw=true)
